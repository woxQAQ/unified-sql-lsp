name: "Cross-Dialect Basic SELECT"
description: "Test basic SELECT completion - works across all SQL dialects"

database:
  dialect: "mysql"
  schemas:
    - "../../../fixtures/schema/mysql/01_create_tables.sql"
  data:
    - "../../../fixtures/data/mysql/02_insert_basic_data.sql"

tests:
  - name: "bare SELECT"
    description: "Should complete bare SELECT statement"
    sql: "SELECT |"
    expect_completion:
      contains:
        - "*"

  - name: "basic SELECT completion"
    description: "Should complete basic columns in SELECT - works in MySQL and PostgreSQL"
    sql: "SELECT | FROM users"
    expect_completion:
      contains:
        - "id"
        - "username"
        - "email"
        - "*"
      min_count: 5

  - name: "table name completion"
    description: "Should complete table names - works across dialects"
    sql: "SELECT * FROM |"
    expect_completion:
      contains:
        - "users"
      min_count: 2

  - name: "basic WHERE column completion"
    description: "Should complete columns after WHERE in single-table query"
    sql: "SELECT * FROM users WHERE |"
    expect_completion:
      contains:
        - "id"
        - "username"
        - "email"
      min_count: 5

  - name: "alias-qualified completion in SELECT"
    description: "Should complete alias-qualified columns for single-table alias"
    sql: "SELECT u.| FROM users AS u"
    expect_completion:
      contains:
        - "u.id"
        - "u.username"
        - "u.email"
      min_count: 5

  - name: "completion after comma in SELECT list"
    description: "Should keep suggesting remaining projection candidates after comma"
    sql: "SELECT id, | FROM users"
    expect_completion:
      contains:
        - "username"
        - "email"
        - "full_name"
      min_count: 5

  - name: "basic JOIN ON completion"
    description: "Should complete join condition columns from both sides"
    sql: "SELECT * FROM users u JOIN orders o ON |"
    expect_completion:
      contains:
        - "u.id"
        - "o.user_id"
      min_count: 5
